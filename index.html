<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Notes about Arch config</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {  background-color: #f8f8f8; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ef2929; } /* Alert */
    code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #204a87; } /* Attribute */
    code span.bn { color: #0000cf; } /* BaseN */
    code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4e9a06; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #8f5902; font-style: italic; } /* Comment */
    code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
    code span.dt { color: #204a87; } /* DataType */
    code span.dv { color: #0000cf; } /* DecVal */
    code span.er { color: #a40000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #0000cf; } /* Float */
    code span.fu { color: #204a87; font-weight: bold; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
    code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
    code span.ot { color: #8f5902; } /* Other */
    code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
    code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
    code span.ss { color: #4e9a06; } /* SpecialString */
    code span.st { color: #4e9a06; } /* String */
    code span.va { color: #000000; } /* Variable */
    code span.vs { color: #4e9a06; } /* VerbatimString */
    code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="pandoc.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Notes about Arch config</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#tips" id="toc-tips">Tips</a>
<ul>
<li><a href="#how-to-tell-which-distro-youre-running"
id="toc-how-to-tell-which-distro-youre-running">How to tell which distro
you’re running</a></li>
<li><a href="#restore-messed-up-cr-in-terminal"
id="toc-restore-messed-up-cr-in-terminal">Restore messed-up
<code>&lt;CR&gt;</code> in terminal</a></li>
<li><a href="#enable-network-time-protocol-ntp"
id="toc-enable-network-time-protocol-ntp">Enable Network Time Protocol
(NTP)</a></li>
<li><a href="#preserve-colors-when-redirecting-program-output"
id="toc-preserve-colors-when-redirecting-program-output">Preserve colors
when redirecting program output</a></li>
<li><a href="#open-and-verify-.p7m-files"
id="toc-open-and-verify-.p7m-files">Open and verify <code>.p7m</code>
files</a></li>
<li><a href="#dead-keys-on-us-int-keyboard"
id="toc-dead-keys-on-us-int-keyboard">Dead keys on <code>us-int</code>
keyboard</a></li>
<li><a href="#grep" id="toc-grep"><code>grep</code></a></li>
</ul></li>
<li><a href="#git" id="toc-git"><code>git</code></a>
<ul>
<li><a href="#tools" id="toc-tools">Tools</a></li>
<li><a href="#list-all-tags-matching-a-pattern"
id="toc-list-all-tags-matching-a-pattern">List all tags matching a
pattern</a></li>
<li><a href="#update-submodules-after-every-branch-switch"
id="toc-update-submodules-after-every-branch-switch">Update submodules
after every branch switch</a></li>
<li><a href="#multiple-accounts" id="toc-multiple-accounts">Multiple
accounts</a></li>
<li><a href="#check-if-remote-branch-has-been-deleted"
id="toc-check-if-remote-branch-has-been-deleted">Check if remote branch
has been deleted</a></li>
</ul></li>
<li><a href="#ssh" id="toc-ssh">ssh</a>
<ul>
<li><a href="#check-key-password" id="toc-check-key-password">Check key
password</a></li>
</ul></li>
<li><a href="#top" id="toc-top"><code>top</code></a>
<ul>
<li><a href="#interactive-usage" id="toc-interactive-usage">Interactive
usage</a></li>
<li><a href="#memory-usage" id="toc-memory-usage">Memory Usage</a></li>
</ul></li>
<li><a href="#unreal-engine" id="toc-unreal-engine">Unreal Engine</a>
<ul>
<li><a href="#unity-vs-non-unity-builds"
id="toc-unity-vs-non-unity-builds">unity vs non-unity builds</a></li>
<li><a href="#profiling" id="toc-profiling">Profiling</a></li>
</ul></li>
<li><a href="#clang" id="toc-clang">Clang</a>
<ul>
<li><a href="#dump-memory-layout" id="toc-dump-memory-layout">Dump
memory layout</a></li>
</ul></li>
<li><a href="#lldb" id="toc-lldb"><code>lldb</code></a>
<ul>
<li><a href="#skip-code" id="toc-skip-code">Skip code</a></li>
<li><a href="#show-actual-pointer-type"
id="toc-show-actual-pointer-type">Show actual pointer type</a></li>
<li><a href="#print-pointer-as-array"
id="toc-print-pointer-as-array">Print pointer as array</a></li>
<li><a href="#redirect-output-to-file"
id="toc-redirect-output-to-file">Redirect output to file</a></li>
<li><a href="#store-expression-results"
id="toc-store-expression-results">Store expression results</a></li>
</ul></li>
<li><a href="#nvim" id="toc-nvim"><code>nvim</code></a></li>
<li><a href="#gnuplot" id="toc-gnuplot">GNUPlot</a></li>
<li><a href="#getting-rid-of-xwayland"
id="toc-getting-rid-of-xwayland">Getting rid of XWayland</a>
<ul>
<li><a href="#electron" id="toc-electron">Electron</a></li>
<li><a href="#jetbrains-rider" id="toc-jetbrains-rider">JetBrains
(Rider)</a></li>
</ul></li>
<li><a href="#troubleshooting"
id="toc-troubleshooting">Troubleshooting</a>
<ul>
<li><a
href="#libva-error-usrlibdrinvidia_drv_video.so-init-failed-with-amdnvidia"
id="toc-libva-error-usrlibdrinvidia_drv_video.so-init-failed-with-amdnvidia">libva
error: /usr/lib/dri/nvidia_drv_video.so init failed with
AMD/nvidia</a></li>
<li><a href="#asian-fonts" id="toc-asian-fonts">Asian fonts</a></li>
<li><a href="#mount-btrfs-disk-and-give-it-user-permissions"
id="toc-mount-btrfs-disk-and-give-it-user-permissions">Mount
<code>btrfs</code> disk and give it user permissions</a></li>
<li><a href="#high-cpu-usage-from-irq9-acpi"
id="toc-high-cpu-usage-from-irq9-acpi">High CPU usage from
<code>irq/9-acpi</code></a></li>
</ul></li>
<li><a href="#misc" id="toc-misc">Misc</a>
<ul>
<li><a href="#change-country-in-google-play"
id="toc-change-country-in-google-play">Change country in Google
Play</a></li>
</ul></li>
</ul>
</nav>
<hr />
<p>Some notes about my Arch setup. Look for <code>[issue]</code> to see
all the pending issues.</p>
<h2 id="tips">Tips</h2>
<h3 id="how-to-tell-which-distro-youre-running">How to tell which distro
you’re running</h3>
<p>Try with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> /etc/<span class="pp">*</span>release</span></code></pre></div>
<p>You may also get lucky and find some info in</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/issue</span></span></code></pre></div>
<p>which is used by <code>agetty</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This may not work.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># E.g. it works on v2.41 but not on v2.30.</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="ex">agetty</span> <span class="at">--show-issue</span></span></code></pre></div>
<h3 id="restore-messed-up-cr-in-terminal">Restore messed-up
<code>&lt;CR&gt;</code> in terminal</h3>
<p>Sometimes control characters mess up with <code>&lt;CR&gt;</code> in
the terminal output and all outputs from commands appear on one line.
This happens to me, for example, when exiting a ncurses pinentry with
<code>&lt;C-c&gt;</code>. To fix this:</p>
<ol type="1">
<li>Type <code>&lt;C-c&gt;</code>;</li>
<li>Run <code>reset</code>.</li>
</ol>
<p>See <a href="https://askubuntu.com/a/58049">here</a> for more
details.</p>
<h3 id="enable-network-time-protocol-ntp">Enable Network Time Protocol
(NTP)</h3>
<p>The easiest way to do it on most systemd-based installations is:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run with root permission</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">timedatectl</span> set-ntp true</span></code></pre></div>
<p>More on the <a
href="https://wiki.archlinux.org/title/Systemd-timesyncd#Enable_and_start">Arch
Wiki</a> and on <a
href="https://wiki.archlinux.org/title/System_time">System Time</a>.</p>
<h3 id="preserve-colors-when-redirecting-program-output">Preserve colors
when redirecting program output</h3>
<p>Some commands have an option for this;
e.g. <code>ls --color=always</code>. Otherwise, prepend
<code>unbuffer</code> to the command:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#                   v &quot;auto&quot;, not &quot;always&quot;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">unbuffer</span> ls <span class="at">--color</span><span class="op">=</span>auto <span class="kw">|</span> <span class="fu">less</span> <span class="at">-R</span></span></code></pre></div>
<p>On Arch, install <code>extra/expect</code>. Also note that
<code>alias</code>es won’t be executed by <code>unbuffer</code>. See <a
href="https://superuser.com/a/751809">here</a>.</p>
<h3 id="open-and-verify-.p7m-files">Open and verify <code>.p7m</code>
files</h3>
<p>Sometimes AEcI sends me <code>.p7m</code> files. I can extract them
with:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">openssl</span> smime <span class="at">-verify</span> <span class="at">-noverify</span> <span class="at">-binary</span> <span class="at">-in</span> file.pdf.p7m <span class="at">-inform</span> DER <span class="at">-out</span> file.pdf</span></code></pre></div>
<p>But I’m not able to verify the signature locally. To do this, use <a
href="https://vol.ca.notariato.it/it"
class="uri">https://vol.ca.notariato.it/it</a>.</p>
<h3 id="dead-keys-on-us-int-keyboard">Dead keys on <code>us-int</code>
keyboard</h3>
<p>Here you are the Windows-specific layout:</p>
<p><img
src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/KB_US-International.svg/1920px-KB_US-International.svg.png" /></p>
<p>It seems to work correctly on Linux as well. More details can be
found on <a
href="https://en.wikipedia.org/wiki/QWERTY#US-International">Wikipedia</a>.
I couldn’t find anything Linux specific, i.e. any map of the so-called
<em>international</em> (or <em>exended</em>) keyboard, which should
extend the layout map above.</p>
<h3 id="grep"><code>grep</code></h3>
<p>To search recursively:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-R</span> <span class="st">&quot;pattern&quot;</span> /some/path</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># You may want to use:</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  --exclude=&lt;glob&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#    Skip subfiles whose base name matches &lt;glob&gt;.</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  --exclude-dir=&lt;glob&gt;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#    Skip dirs whose name suffix match &lt;glob&gt;.</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  --include=&lt;glob&gt;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#    Search files whose basename match &lt;glob&gt;.</span></span></code></pre></div>
<p>From <code>man grep(1)</code>:</p>
<ul>
<li><p><em>Name suffix</em> is either:</p>
<ul>
<li><p>The whole name, or</p></li>
<li><p>A trailing part that starts with a non-slash character
immediately after a slash (/) in the name.</p></li>
</ul></li>
<li><p><em>Base name</em> is the part after the last slash.</p></li>
</ul>
<p>To get only the name of the files that contain a match, use
<code>-l</code> (or <code>--files-with-matches</code>).</p>
<p>This may be useful to get a list of possibly interesting files to be
checked by a text editor; e.g.:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nvim</span> <span class="va">$(</span><span class="fu">grep</span> <span class="at">-l</span> <span class="at">-R</span> <span class="st">&quot;pattern&quot;</span> .<span class="va">)</span></span></code></pre></div>
<h2 id="git"><code>git</code></h2>
<h3 id="tools">Tools</h3>
<ul>
<li><a
href="https://github.com/lusingander/serie"><code>serie</code></a> for
pretty display of logs</li>
</ul>
<h3 id="list-all-tags-matching-a-pattern">List all tags matching a
pattern</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> tag <span class="at">--list</span> <span class="st">&#39;v1.*&#39;</span></span></code></pre></div>
<h3 id="update-submodules-after-every-branch-switch">Update submodules
after every branch switch</h3>
<p>Append this to <code>.git/hooks/post-checkout</code>:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In .git/hooks/post-checkout</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> submodule update <span class="at">--init</span> <span class="at">--recursive</span></span></code></pre></div>
<h3 id="multiple-accounts">Multiple accounts</h3>
<p>If you want to use a specific account for a repository, set it like
this:</p>
<pre class="gitconfig"><code># In &lt;repo_path&gt;/.git/config
[user]
    name  = &lt;name&gt;
    email = &lt;email&gt;

# ...</code></pre>
<h3 id="check-if-remote-branch-has-been-deleted">Check if remote branch
has been deleted</h3>
<p>First, update the remote refs:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> fetch <span class="at">--prune</span> <span class="at">--all</span></span></code></pre></div>
<p>Then get info about the branches:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-v</span></span></code></pre></div>
<p>The output will look like this:</p>
<pre><code>* master        abcdebf3d17 [behind 581] some commit message
  topic-branch  fghilb32370 [gone] Some other commit message
  [...]</code></pre>
<p>You see the remote <code>topic-branch</code> was tracking has gone.
See also <a
href="https://www.erikschierboom.com/2020/02/17/cleaning-up-local-git-branches-deleted-on-a-remote/">this</a>
blog post.</p>
<h2 id="ssh">ssh</h2>
<h3 id="check-key-password">Check key password</h3>
<p>To check if a password unlocks the private key, try and change it
with:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh-keygen</span> <span class="at">-f</span> ~/.ssh/id_rsa <span class="at">-p</span></span></code></pre></div>
<p>This will ask the current password, first. When promped for the new
password, type two mismatching ones so that it doesn’t get changed.</p>
<h2 id="top"><code>top</code></h2>
<p>The config file for <code>top</code> is stored in:</p>
<pre><code>~/.config/procps/toprc</code></pre>
<h3 id="interactive-usage">Interactive usage</h3>
<p>Commands that operate on a process (e.g. <code>k</code>), will target
the first entry in the task window.</p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;">Shortcut</th>
<th style="text-align: left;">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>y</code></td>
<td style="text-align: left;">Highlight running tasks (i.e. process with
status <code>R</code>)</td>
</tr>
<tr>
<td style="text-align: left;"><code>x</code></td>
<td style="text-align: left;">Highlight current sort column</td>
</tr>
<tr>
<td style="text-align: left;"><code>z</code></td>
<td style="text-align: left;">Toggle color/monochrome</td>
</tr>
<tr>
<td style="text-align: left;"><code>&lt;</code></td>
<td style="text-align: left;">Sort by column on the left to current
column <a href="#fn1" class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a></td>
</tr>
<tr>
<td style="text-align: left;"><code>&gt;</code></td>
<td style="text-align: left;">Sort by column on the right to current
column</td>
</tr>
<tr>
<td style="text-align: left;"><code>?</code></td>
<td style="text-align: left;">Show help for interactive commands</td>
</tr>
<tr>
<td style="text-align: left;"><code>E</code></td>
<td style="text-align: left;">Change summary memory scale</td>
</tr>
<tr>
<td style="text-align: left;"><code>e</code></td>
<td style="text-align: left;">Change task memory scale</td>
</tr>
<tr>
<td style="text-align: left;"><code>m</code></td>
<td style="text-align: left;">Cycle through memory display modes</td>
</tr>
<tr>
<td style="text-align: left;"><code>k</code></td>
<td style="text-align: left;">Kill process</td>
</tr>
<tr>
<td style="text-align: left;"><code>0</code></td>
<td style="text-align: left;">Suppress fields whose value is 0</td>
</tr>
<tr>
<td style="text-align: left;"><code>c</code></td>
<td style="text-align: left;">Toggle command line</td>
</tr>
<tr>
<td style="text-align: left;"><code>1</code></td>
<td style="text-align: left;">Toggle single/multiple CPU view</td>
</tr>
<tr>
<td style="text-align: left;"><code>t</code></td>
<td style="text-align: left;">Cycle through CPU display modes</td>
</tr>
<tr>
<td style="text-align: left;"><code>i</code></td>
<td style="text-align: left;">Toggle idle processes</td>
</tr>
<tr>
<td style="text-align: left;"><code>Z</code></td>
<td style="text-align: left;">Configure colorscheme</td>
</tr>
<tr>
<td style="text-align: left;"><code>W</code></td>
<td style="text-align: left;">Write configuration file</td>
</tr>
<tr>
<td style="text-align: left;"><code>o</code></td>
<td style="text-align: left;">Add case-insensitive filter
(e.g. <code>COMMAND=x</code> for comands <em>containing</em> “x”)</td>
</tr>
<tr>
<td style="text-align: left;"><code>O</code></td>
<td style="text-align: left;">Add case-sensitive filter</td>
</tr>
<tr>
<td style="text-align: left;"><code>^O</code></td>
<td style="text-align: left;">Show current filters</td>
</tr>
<tr>
<td style="text-align: left;"><code>=</code></td>
<td style="text-align: left;">Reset filters</td>
</tr>
</tbody>
</table>
<p>See also <a
href="https://www.redhat.com/en/blog/customize-top-command"
class="uri">https://www.redhat.com/en/blog/customize-top-command</a>.</p>
<h3 id="memory-usage">Memory Usage</h3>
<p>(See more in section <code>2c. MEMORY Usage</code> of
<code>man top</code>).</p>
<p>Memory usage is displayed the summary area. It consists of two lines
whose values are read (or evaluated) from <code>/proc/meminfo</code> as
follows (source fields in parenthesis):</p>
<pre><code>Line 1 reflects physical memory, classified as:
    total          ( MemTotal )
    free           ( MemFree )
    used           ( MemTotal - MemAvailable )
    buff/cache     ( Buffers + Cached + SReclaimable )

Line 2 reflects mostly virtual memory, classified as:
    total          ( SwapTotal )
    free           ( SwapFree )
    used           ( SwapTotal - SwapFree )
    avail          ( MemAvailable, which is physical memory )</code></pre>
<p>The <code>avail</code> field is an estimation of physical memory
available for starting new applications, without swapping. Unlike the
<code>free</code> field, it attempts to account for readily reclaimable
page cache and memory slabs.</p>
<p>In the alternate memory display modes, two abbreviated summary lines
are shown consisting of these elements:</p>
<pre><code>           a    b          c
GiB Mem : 18.7/15.738   [ ... ]
GiB Swap:  0.0/7.999    [ ... ]</code></pre>
<p>Where:</p>
<ol type="a">
<li>is the percentage used;</li>
<li>is the total available;</li>
<li>is one of two visual graphs of those representations.</li>
</ol>
<p>For the physical memory, the percentage represents the
<code>total</code> minus the estimated <code>avail</code>. The graph is
divided between the non-cached portion of <code>used</code> and any
remaining memory not otherwise accounted for by <code>avail</code>.</p>
<h2 id="unreal-engine">Unreal Engine</h2>
<h3 id="unity-vs-non-unity-builds">unity vs non-unity builds</h3>
<p>See a discussion and how to setup one build type or another at this
link:</p>
<p><a
href="https://forums.unrealengine.com/t/how-to-compile-in-non-unity-mode/94863"
class="uri">https://forums.unrealengine.com/t/how-to-compile-in-non-unity-mode/94863</a></p>
<h3 id="profiling">Profiling</h3>
<p>See:</p>
<p><a
href="https://www.intel.com/content/www/us/en/developer/articles/technical/unreal-engine-optimization-profiling-fundamentals.html"
class="uri">https://www.intel.com/content/www/us/en/developer/articles/technical/unreal-engine-optimization-profiling-fundamentals.html</a></p>
<h2 id="clang">Clang</h2>
<h3 id="dump-memory-layout">Dump memory layout</h3>
<p>You can dump the memory layout of a <code>struct</code> or
<code>class</code> with <code>clang</code>. See</p>
<p><a
href="https://eli.thegreenplace.net/2012/12/17/dumping-a-c-objects-memory-layout-with-clang"
class="uri">https://eli.thegreenplace.net/2012/12/17/dumping-a-c-objects-memory-layout-with-clang</a></p>
<h2 id="lldb"><code>lldb</code></h2>
<p>Expression evaluator with support for NatVis: <a
href="https://werat.dev/blog/blazing-fast-expression-evaluation-for-c-in-lldb"
class="uri">https://werat.dev/blog/blazing-fast-expression-evaluation-for-c-in-lldb</a>
<a
href="https://llvm.org/devmtg/2021-11/slides/2021-Buildingafaster-expression-evaluatorforLLDB.pdf"
class="uri">https://llvm.org/devmtg/2021-11/slides/2021-Buildingafaster-expression-evaluatorforLLDB.pdf</a></p>
<p>Another expression evaluator: <a
href="https://llvm.org/devmtg/2025-06/slides/quick-talk/lebedev-lldb.pdf"
class="uri">https://llvm.org/devmtg/2025-06/slides/quick-talk/lebedev-lldb.pdf</a></p>
<p>For a cheatsheet, see also: <a
href="https://gist.github.com/alanzeino/82713016fd6229ea43a8"
class="uri">https://gist.github.com/alanzeino/82713016fd6229ea43a8</a></p>
<p>Script collection (and reference to a book): <a
href="https://github.com/DerekSelander/LLDB?tab=readme-ov-file"
class="uri">https://github.com/DerekSelander/LLDB?tab=readme-ov-file</a></p>
<p>lldbinit <a
href="https://github.com/gdbinit/lldbinit/tree/master?tab=readme-ov-file"
class="uri">https://github.com/gdbinit/lldbinit/tree/master?tab=readme-ov-file</a></p>
<p>DAP configuration: <a
href="https://marketplace.visualstudio.com/items?itemName=llvm-vs-code-extensions.lldb-dap"
class="uri">https://marketplace.visualstudio.com/items?itemName=llvm-vs-code-extensions.lldb-dap</a></p>
<p>Retrieve template args of formatters: <a
href="https://discourse.llvm.org/t/lldb-sbapi-questions/55899"
class="uri">https://discourse.llvm.org/t/lldb-sbapi-questions/55899</a></p>
<p><code>codelldb</code> start a new debug session: <a
href="https://github.com/vadimcn/codelldb/blob/master/MANUAL.md#starting-a-new-debug-session"
class="uri">https://github.com/vadimcn/codelldb/blob/master/MANUAL.md#starting-a-new-debug-session</a></p>
<p>[issue] Why can I not execute expression involving <code>this</code>?
<a href="https://bugs.llvm.org/show_bug.cgi?id=41237"
class="uri">https://bugs.llvm.org/show_bug.cgi?id=41237</a> [issue]
Reverse debugging? [issue] Hide local vars that are not yet defined? <a
href="https://discourse.llvm.org/t/hiding-local-variables-not-defined-yet/58025"
class="uri">https://discourse.llvm.org/t/hiding-local-variables-not-defined-yet/58025</a>
Redirect input/output? * <a
href="https://stackoverflow.com/questions/64786161/use-input-stdin-in-debug-console-vscode"
class="uri">https://stackoverflow.com/questions/64786161/use-input-stdin-in-debug-console-vscode</a>
* <a
href="https://stackoverflow.com/questions/19176672/redirect-lldb-output-to-file"
class="uri">https://stackoverflow.com/questions/19176672/redirect-lldb-output-to-file</a></p>
<p>What is <code>ptrace_scope</code> ? * <a
href="https://askubuntu.com/questions/146160/what-is-the-ptrace-scope-workaround-for-wine-programs-and-are-there-any-risks%5D"
class="uri">https://askubuntu.com/questions/146160/what-is-the-ptrace-scope-workaround-for-wine-programs-and-are-there-any-risks]</a></p>
<p>How to print actual(derived) object properties in LLDB ? * <a
href="https://stackoverflow.com/questions/70421258/how-to-print-actualderived-object-properties-in-lldb"
class="uri">https://stackoverflow.com/questions/70421258/how-to-print-actualderived-object-properties-in-lldb</a></p>
<p>Logpoints in <code>nvim-dap</code>: <a
href="https://www.reddit.com/r/neovim/comments/uerye3/dap_log_messages_and_conditional_break_points"
class="uri">https://www.reddit.com/r/neovim/comments/uerye3/dap_log_messages_and_conditional_break_points</a></p>
<h3 id="skip-code">Skip code</h3>
<pre><code>thread jump --by &lt;line-count&gt;
th j -b &lt;line-count&gt;</code></pre>
<p>or</p>
<pre><code>thread jump --line &lt;line-count&gt;</code></pre>
<p>See: <a
href="https://blog.eidinger.info/skip-code-during-debugging-in-xcode"
class="uri">https://blog.eidinger.info/skip-code-during-debugging-in-xcode</a></p>
<h3 id="show-actual-pointer-type">Show actual pointer type</h3>
<pre><code>frame variable -d run-target pObject</code></pre>
<p>or</p>
<pre><code>expr -d run-target -- pObject</code></pre>
<p>See: <a href="https://stackoverflow.com/a/14350239"
class="uri">https://stackoverflow.com/a/14350239</a></p>
<h3 id="print-pointer-as-array">Print pointer as array</h3>
<pre><code>parray &lt;count&gt; addr
</code></pre>
<p>See: <a
href="https://stackoverflow.com/questions/7062173/view-array-in-lldb-equivalent-of-gdbs-operator-in-xcode-4-1"
class="uri">https://stackoverflow.com/questions/7062173/view-array-in-lldb-equivalent-of-gdbs-operator-in-xcode-4-1</a></p>
<h3 id="redirect-output-to-file">Redirect output to file</h3>
<pre><code>session save &lt;out-file&gt;</code></pre>
<p>See: <a href="https://stackoverflow.com/a/73872850"
class="uri">https://stackoverflow.com/a/73872850</a></p>
<h3 id="store-expression-results">Store expression results</h3>
<pre><code>expression auto $name = expr</code></pre>
<p>Then you can use <code>$name</code> in subsequent prompts.</p>
<h2 id="nvim"><code>nvim</code></h2>
<p>Resurce (about what?): <a
href="https://lyz-code.github.io/blue-book/vim_keymaps/"
class="uri">https://lyz-code.github.io/blue-book/vim_keymaps/</a></p>
<p>To use LSP for semantical highlighting: <a
href="https://gist.github.com/swarn/fb37d9eefe1bc616c2a7e476c0bc0316"
class="uri">https://gist.github.com/swarn/fb37d9eefe1bc616c2a7e476c0bc0316</a></p>
<p>Working with C#: <a
href="https://aaronbos.dev/posts/csharp-dotnet-neovim"
class="uri">https://aaronbos.dev/posts/csharp-dotnet-neovim</a></p>
<h2 id="gnuplot">GNUPlot</h2>
<p>A book on GNUPlot 5 can be found <a
href="https://alogus.com/g5script/content_index">here</a>.</p>
<h5 id="pass-args-to-a-script">“Pass” args to a script</h5>
<p>There appears to be no way to pass cmd-line args to GNUPlot scripts.
<a
href="https://gnuplot-info.narkive.com/h0AI295W/command-line-arguments-to-gnuplot-scripts#post2">This</a>
post suggests using <em>here files</em> or env vars for this purpose.
The flow with env vars is the following:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">GNUPLOT_TITLE</span><span class="op">=</span><span class="st">&quot;title&quot;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="ex">gnuplot</span> script.plt</span></code></pre></div>
<p>You then access those vars within the script via a call to <a
href="http://gnuplot.info/docs_5.5/loc2100.html"><code>system</code></a>:</p>
<pre class="plt"><code># File: script.plt
plot_title = system(&quot;echo $GNUPLOT_TITLE&quot;)
set title plot_title . &quot; (scale 1:120 cm)&quot;
# ...</code></pre>
<p>Also, see <a href="http://gnuplot.info/docs/loc3111.html">this</a>
page for some documentation on user-defined variables and functions
within GNUPlot scripts.</p>
<h5 id="set-equal-scale-on-x-and-y">Set equal scale on <em>x</em> and
<em>y</em></h5>
<pre><code>set size ratio -1</code></pre>
<p>See: <a href="https://stackoverflow.com/a/27546936"
class="uri">https://stackoverflow.com/a/27546936</a></p>
<h2 id="getting-rid-of-xwayland">Getting rid of XWayland</h2>
<h3 id="electron">Electron</h3>
<p>Set environment variable <a
href="https://www.electronjs.org/docs/latest/api/environment-variables#electron_ozone_platform_hint-linux"><code>ELECTRON_OZONE_PLATFORM_HINT</code></a>
to <code>wayland</code> or <code>auto</code>.</p>
<h4 id="teams-for-linux"><a
href="https://github.com/IsmaelMartinez/teams-for-linux"><code>teams-for-linux</code></a></h4>
<p>When starting <code>teams-for-linux</code> (v1.12.7) at Hyprland
startup, no tray icon appears in Waybar. Setting
<code>--trayIconEnabled</code> did not help. Invoking it with a delay
seems to do the trick:</p>
<pre><code># File: ~/.config/hypr/hyprland.conf
exec-once = sleep 1 &amp;&amp; teams-for-linux</code></pre>
<h4 id="chromium">Chromium</h4>
<p>Chromium doesn’t seem to care about
<code>ELECTRON_OZONE_PLATFORM_HINT</code>. Run it with the following
flag:</p>
<pre><code>--ozone-platform-hint=auto</code></pre>
<p>If this flag doesn’t seem to have any effect, close <em>all</em> the
chromium instances and re-launch it. You can also set this flag in</p>
<pre><code>~/.config/chromium-flags.conf</code></pre>
<p>See <a href="https://wiki.archlinux.org/title/Chromium">Arch
Wiki</a>.</p>
<h3 id="jetbrains-rider">JetBrains (Rider)</h3>
<p>Run with the following flags (more info <a
href="https://blog.jetbrains.com/platform/2024/07/wayland-support-preview-in-2024-2/">here</a>):</p>
<pre><code>-Dawt.toolkit.name=WLToolkit</code></pre>
<p>I tried this but I can’t see the mouse cursor while hovering on
Rider’s window (see <a
href="https://youtrack.jetbrains.com/issue/JBR-8223/Pure-Wayland-on-Arch-Hyprland-no-cursor">JBR-8223</a>).
<a
href="https://youtrack.jetbrains.com/issue/JBR-8223/Pure-Wayland-on-Arch-Hyprland-no-cursor#focus=Comments-27-11649983.0-0">This</a>
comment suggests a workaraund:</p>
<pre><code># File: ~/.config/hypr/hyprland.conf
cursor {
  # Both 1 and 2 seem to work. It makes no sense because 2 should be the
  # default value.
  no_hardware_cursors = 2
}</code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3
id="libva-error-usrlibdrinvidia_drv_video.so-init-failed-with-amdnvidia">libva
error: /usr/lib/dri/nvidia_drv_video.so init failed with AMD/nvidia</h3>
<p>[issue] Apparently, no solution. See <a
href="https://github.com/elFarto/nvidia-vaapi-driver/issues/160">here</a>.</p>
<h3 id="asian-fonts">Asian fonts</h3>
<p>Just install any of the fonts that are recommended here
(e.g. <code>noto-fonts-cjk</code> is fine):</p>
<p><a
href="https://wiki.archlinux.org/title/Fonts#Chinese,_Japanese,_Korean,_Vietnamese"
class="uri">https://wiki.archlinux.org/title/Fonts#Chinese,_Japanese,_Korean,_Vietnamese</a></p>
<p>And Chromium/Kitty will pick them up on the next session.</p>
<h3 id="mount-btrfs-disk-and-give-it-user-permissions">Mount
<code>btrfs</code> disk and give it user permissions</h3>
<p>Mount options like <code>uid</code> and <code>gid</code> are ignored
by <code>btrfs</code>. Assuming the following line in <code>fstab</code>
exists for the device:</p>
<pre><code># fstab
UUID=&lt;uid&gt;  /mnt/extreme-ssd  btrfs  rw,relatime,ssd,discard=async,space_cache=v2,noauto  0  0</code></pre>
<p>You have to mount the disk and give it user permissions:</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mount /mnt/extreme-ssd</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chown <span class="at">-R</span> <span class="va">$USER</span>:<span class="va">$USER</span> /mnt/extreme-ssd</span></code></pre></div>
<p>Note that mount option <code>users</code> allows every user to mount
the disk (not only <em>root</em>) but it <em>does not</em> give user
permissions to the disk. See <a
href="https://www.reddit.com/r/btrfs/comments/j5jaby/how_to_automount_btrfs_with_user_permission/">here</a>.</p>
<h3 id="high-cpu-usage-from-irq9-acpi">High CPU usage from
<code>irq/9-acpi</code></h3>
<p>Check the interrupts in
<code>/sys/firmware/acpi/interrupts</code>:</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> /sys/firmware/acpi/interrupts <span class="at">-exec</span> echo <span class="at">-n</span> <span class="st">&quot;{}:&quot;</span> <span class="dt">\;</span> <span class="at">-exec</span> cat <span class="st">&quot;{}&quot;</span> <span class="dt">\;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> . <span class="at">-r</span> /sys/firmware/acpi/interrupts</span></code></pre></div>
<p>And look for a big number. Then mask it:</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: GPE is &quot;general purpose event&quot; that ACPI handles.</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># See: https://wiki.ubuntu.com/Kernel/Reference/ACPITricksAndTips</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> echo <span class="st">&quot;mask&quot;</span> <span class="op">&gt;&gt;</span> /sys/firmware/acpi/interrupts/gpe17</span></code></pre></div>
<p>I found the solution <a
href="https://forum.manjaro.org/t/irq-9-acpi-is-killing-my-system/176107/13">here</a>.</p>
<p><strong><em>Questions:</em></strong></p>
<ul>
<li><p>Why does this happen?</p></li>
<li><p>How can I know <code>gpe17</code> is related to
<code>irq/9-acpi</code>?</p></li>
</ul>
<h2 id="misc">Misc</h2>
<h3 id="change-country-in-google-play">Change country in Google
Play</h3>
<p>Steps taken from <a
href="https://www.guidingtech.com/change-country-in-google-play-store/">here</a>,
section <em>Desktop</em>.</p>
<ol type="1">
<li><p><a href="https://payments.google.com/gp/w/home/settings">Payment
Settings</a> in Google Play.</p></li>
<li><p>Click <em>Country/Region</em>.</p></li>
<li><p>Choose option <em>Create new profile</em>.</p></li>
<li><p>Press <em>Continue</em> in the confirmation box to create a new
profile.</p></li>
<li><p>Select a country from the dropdown menu for Country/Region and
continue.</p></li>
<li><p>Enter your payment address and submit.</p></li>
</ol>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://superuser.com/a/398870"
class="uri">https://superuser.com/a/398870</a><a href="#fnref1"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
