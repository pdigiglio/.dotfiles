font_family      DejaVu Sans Mono
bold_font        DejaVu Sans Mono Bold
italic_font      DejaVu Sans Mono Oblique
bold_italic_font DejaVu Sans Mono Bold Oblique

font_size 9

background_opacity 0.85

# -- Tab styling --

# NOTE:
#  1. When enabling a layout, add it to the dictionary below.
#  2. The title is taken from zsh (check for `DISABLE_AUTO_TITLE` env var).
tab_title_template "{index}: [{num_windows}{({'stack':'+', 'splits':'#', 'tall':'<', 'fat':'^'}[layout_name])}{keyboard_mode}] {title} "
tab_bar_style separator
tab_separator "| "

inactive_tab_background #00ff00
tab_bar_background      #00ff00
tab_bar_min_tabs 1

# Make active tab more visible.
inactive_border_color #606060
inactive_text_alpha 0.4
# --

mouse_enable true

# -- Unmap Ctrl-<Tab> and Ctrl-Shift-<Tab>.
#
#  1. They switch to the next/previous tab.
#  2. I need those in nvim for completion.

map ctrl+tab
map ctrl+shift+tab

# -- Replicate my tmux keys in kitty.
enabled_layouts tall,splits,fat,stack

# Enter window mode on Ctrl-<Space>
map --new-mode wm ctrl+space 

# New tab (i.e. a window in tmux).
map --mode wm c combine : new_tab : pop_keyboard_mode
# New tab (keep working dir)
map --mode wm shift+c combine : new_tab_with_cwd : pop_keyboard_mode
# Close a tab and all its windows.
map --mode wm & combine : close_tab : pop_keyboard_mode
map --mode wm x combine : close_window : pop_keyboard_mode
# Go to next tab
map --mode wm n combine : next_tab : pop_keyboard_mode
# Go to prev tab
map --mode wm p combine : prev_tab : pop_keyboard_mode

# Select tab by index
map --mode wm 1 combine : goto_tab 1 : pop_keyboard_mode
map --mode wm 2 combine : goto_tab 2 : pop_keyboard_mode
map --mode wm 3 combine : goto_tab 3 : pop_keyboard_mode
map --mode wm 4 combine : goto_tab 4 : pop_keyboard_mode
map --mode wm 5 combine : goto_tab 5 : pop_keyboard_mode
map --mode wm 6 combine : goto_tab 6 : pop_keyboard_mode
map --mode wm 7 combine : goto_tab 7 : pop_keyboard_mode
map --mode wm 8 combine : goto_tab 8 : pop_keyboard_mode
map --mode wm 9 combine : goto_tab 9 : pop_keyboard_mode

# A new horizontal split window (i.e. a pane in tmux).
map --mode wm % combine : launch --cwd=current --location=vsplit : pop_keyboard_mode
map --mode wm | combine : launch --cwd=current --location=vsplit : pop_keyboard_mode

# A new vertical split window (i.e. a pane in tmux).
# NOTE: Shift-0x27 is Shift-', i.e. " (double quote).
map --mode wm shift+0x27 combine : launch --cwd=current --location=hsplit : pop_keyboard_mode
map --mode wm _          combine : launch --cwd=current --location=hsplit : pop_keyboard_mode

# When you are in stack layout, the current window takes up all the available
# space resembling a zoom in.
map --mode wm z       combine : toggle_layout stack : pop_keyboard_mode
map --mode wm shift+h combine : goto_layout tall   : pop_keyboard_mode
map --mode wm shift+k combine : goto_layout fat    : pop_keyboard_mode
map --mode wm shift+3 combine : goto_layout splits : pop_keyboard_mode

# Reset the window size.
map --mode wm = combine : resize_window reset : pop_keyboard_mode

# Enter "resize" mode
map --mode wm r combine : start_resizing_window : pop_keyboard_mode

# Enter "__visual_select__" mode.
#
#  * If only one window, do nothing.
#  * If two windows, move focus from one to the other.
#  * If more than two windows, display numbers on unfocused windows. Press that
#  number to focus the window.
#
#  NOTE: there's no way to exit except for actually changing window.
map --mode wm w combine : pop_keyboard_mode : focus_visible_window 
map --mode wm s combine : pop_keyboard_mode : swap_with_window 

# Switch focus to the neighboring window in the indicated direction.
map --mode wm ctrl+h combine : neighboring_window left  : pop_keyboard_mode
map --mode wm ctrl+l combine : neighboring_window right : pop_keyboard_mode
map --mode wm ctrl+k combine : neighboring_window up    : pop_keyboard_mode
map --mode wm ctrl+j combine : neighboring_window down  : pop_keyboard_mode

# Exit window mode on <Esc>.
map --mode wm esc pop_keyboard_mode
